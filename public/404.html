<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <script>
      // Single Page App for GitHub Pages
      // Based on https://github.com/rafgraph/spa-github-pages
      (function() {
        // This works for GitHub project pages - portfolio is our segment to keep
        var pathSegmentsToKeep = 1; 
        var location = window.location;
        
        // Skip redirect if already on the correct base path
        if (location.pathname.indexOf('/portfolio/') === 0) {
          // Get the path after the '/portfolio/' segment
          var cleanPath = location.pathname.split('/portfolio/')[1] || '';
          
          // Only process if it's not an existing asset/file
          if (!cleanPath.match(/\.[^/]+$/)) {
            var redirectPath = '/portfolio/?' + 
                      cleanPath.replace(/^\/+/, '') + 
                      (location.search ? '&' + location.search.slice(1).replace(/&/g, '~and~') : '') + 
                      location.hash;
                      
            window.history.replaceState(null, null, redirectPath);
          }
        } else {
          // Redirect to the portfolio base
          location.replace(
            location.protocol + '//' + location.hostname + 
            (location.port ? ':' + location.port : '') + 
            '/portfolio/'
          );
        }
      })();
    </script>
  </head>
  <body>
    Redirecting...
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Redirecting...</title>
    <script>
      // Enhanced script for mixed path levels (root and /welcome/)
      // Based on spa-github-pages (https://github.com/rafgraph/spa-github-pages)
      
      (function() {
        // Parse the current URL
        var l = window.location;
        var path = l.pathname;
        
        // Detect if we're at root level (/about, /work, /contact) or in welcome subdirectory
        var segments = path.split('/').filter(function(p) { return p; });
        var isRootPath = segments.length === 1 && ['about', 'work', 'contact'].indexOf(segments[0]) !== -1;
        var isWelcomePath = segments[0] === 'welcome';
        
        // Set base for redirect
        var base = isRootPath ? '/' : '/welcome/';
        var redirectPath = '';
        
        if (isRootPath) {
          // For /about, /work, /contact redirect to /welcome/?/about etc.
          redirectPath = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + 
            '/welcome/?/' + segments[0] + 
            (l.search ? '&' + l.search.slice(1).replace(/&/g, '~and~') : '') + 
            l.hash;
        } else if (isWelcomePath) {
          // For /welcome/about redirect to /welcome/?/about etc.
          var page = segments.length > 1 ? segments.slice(1).join('/') : '';
          redirectPath = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + 
            '/welcome/?/' + page + 
            (l.search ? '&' + l.search.slice(1).replace(/&/g, '~and~') : '') + 
            l.hash;
        } else {
          // Default redirect to /welcome/
          redirectPath = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + '/welcome/';
        }
        
        // Redirect to the SPA entry point
        window.location.replace(redirectPath);
      })();
    </script>
  </head>
  <body>
    Redirecting...
  </body>
</html>
